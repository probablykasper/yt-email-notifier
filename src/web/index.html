<html>

<head>
  <title>YouTube Email Notifier</title>
  <link rel='stylesheet' href="./lib/bulma.min.css">
</link>
</head>

<body>
  <div id='app'>
  </div>

  <div id='new-email-modal' class="modal">
    <div class="modal-background" onclick="$('#new-email-modal').removeClass('is-active')"></div>
    <div class="modal-content box px-6 py-5">
      <form id='new-email-form'>
        <h1 class='is-size-4'><b>New email</b></h1>
        <input id='new-email-input' class="input my-5" type="email" placeholder="Email" required>
        <label class='label'>Check for videos uploaded after this time:</label>
        <input id='new-email-datetime' class="input mb-5" type="text" placeholder="2020-02-02 22:55">
        <button type="submit" class="button is-success">Create</button>
        <div class="button" onclick="$('#new-email-modal').removeClass('is-active')">Cancel</div>
      </form>
    </div>
  </div>

  <div id='error-modal' class="modal">
    <div class="modal-background"></div>
    <div class="modal-content box px-6 py-5">
      <h1 class='is-size-4'><b>Error</b></h1>
      <pre class='mb-5'></pre>
      <div class='button' onclick="$('#error-modal').removeClass('is-active')">OK</div>
    </div>
  </div>

  <div id='offline-modal' class="modal">
    <div class="modal-background"></div>
    <div class="modal-content box px-6 py-5">
      <h1 class='is-size-4'><b>No connection with app</b></h1>
      <p>Try reloading or opening up the settings again</p>
    </div>
  </div>

  <script src="./lib/jquery.min.js"></script>
  <script src="./lib/handlebars.js"></script>
  <script src="./index.js"></script>
  <script id="app-template" type="text/x-handlebars-template">

    <div id='add-channel-modal' class="modal">
      <div class="modal-background" onclick="$('#add-channel-modal').removeClass('is-active')"></div>
      <div class="modal-content box px-6 py-5">
        <form id='add-channel-form'>
          <h1 class='title is-size-4'><b>Add channel</b></h1>
          <label class='label'>Email:</label>
          <div id="add-channel-select-instance" class="select mb-3">
            <select>
              {{#each instances}}
                <option value={{@index}}>{{this.email}}</option>
              {{/each}}
            </select>
          </div>
          <label class='label'>Channel URL</label>
          <input id='add-cannel-input' class='input mb-5' type='url' placeholder='https://www.youtube.com/channel/UCQpQGT51tQbDQztiEH6hBcQ' required>
          <button type="submit" class="button is-success">Add</button>
          <div class="button" onclick="$('#add-channel-modal').removeClass('is-active')">Cancel</div>
        </form>
      </div>
    </div>

    <div id='api-key-modal' class="modal">
      <div class="modal-background" onclick="$('#api-key-modal').removeClass('is-active')"></div>
      <div class="modal-content box px-6 py-5">
        <form id='api-key-form'>
          <h1 class='title is-size-4'><b>Set API key</b></h1>
          <input id='api-key-input' class="input mb-5" value="{{apiKey}}" placeholder="AIzaSyAtvLCpmfVPTVNu1xxzBKcR3T28YWm0JXc" required>
          <button type="submit" class="button is-success">Save</button>
          <div class="button" onclick="$('#api-key-modal').removeClass('is-active')">Cancel</div>
        </form>
      </div>
    </div>

    <section class="hero is-primary mb-2">
      <div class="hero-body">
        <div class="container">
          <div class="level">
            <h1 class="title mb-0">
              YouTube Email Notifier
            </h1>
          </div>
        </div>
      </div>
    </section>
    <div class="container" style="max-width: 900px;">
      <section class="section py-3">
        <div class="buttons field">
          <button class='button' onclick="$('#api-key-modal').addClass('is-active')">API key</button>
          <button class='button is-primary' onclick="$('#new-email-modal').addClass('is-active')">Add email</button>
          <button class='button is-link' onclick="$('#add-channel-modal').addClass('is-active')">Add channel</button>
        </div>
      </section>
      <section class="section">
        {{#each instances}}
          <h2 class="title is-3">{{this.email}}</h2>
          <p>Minutes between refreshes: {{this.minutesBetweenRefreshes}}</p>
          <p>Check for videos after (Time last synced): {{this.lastSyncedAt}}</p>
          <br>
          <table class="table is-fullwidth is-hoverable mb-3">
            <tbody>
              {{#each channels}}
              <tr>
                <td class="is-vcentered" style="width: 1px;">
                  <img src="{{this.icon}}" width="40">
                </td>
                <td class="is-vcentered">
                  <b>{{this.name}}</b><br>
                  <span class="has-text-grey">{{this.id}}</span>
                </td>
                <td class="is-vcentered" style="width: 1px;">
                  <a>Remove</a>
                </td>
              </tr>
              {{/each}}
            </tbody>
          </table>
          <br>
          <br>
          <br>
        {{/each}}
      </section>
    </div>
  </script>
</body>

</html>
